(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,function(t,e,n){},,function(t,e,n){t.exports=n(19)},,,,,,function(t,e,n){},,function(t,e,n){},,,function(t,e,n){},,function(t,e,n){"use strict";n.r(e);var o=n(0),a=n(5),r=n(1),i=n(2),s=(n(12),n(14),n(4),function(t){function e(e){var n=t.call(this,e)||this;return n.state={active:e.active,noteMap:e.noteMap,track:e.track,id:e.id,soundId:e.soundId},n.toggle=n.toggle.bind(n),n}return r.a(e,t),e.prototype.toggle=function(){var t=this.state.noteMap.toggle(this.state.track,this.state.soundId,this.state.id);console.log("newsetting: "+t),this.setState(function(e){return{active:t}})},e.prototype.render=function(){return o.createElement("div",{className:"beatDivision "+(this.state&&this.state.active?"active "+this.props.id:"inactive "+this.props.id),style:{height:"100%",width:96.6/this.props.beatsPerBar+"%"},key:this.props.id,onClick:this.toggle})},e}(o.Component)),c=function(t){function e(e){var n=t.call(this,e)||this;return n.toggleDivision.bind(n),console.log("generated row: "+e.trackID),n.state={noteMap:e.noteMap,row:n.generateRow(e),trackID:e.trackID,soundID:e.soundID},n}return r.a(e,t),e.prototype.generateRow=function(t){var e=this;return Array.from(Array(t.beatDivisions/4).keys()).map(function(n,a){return o.createElement("div",{key:a,className:"bar"},e.generateBar(t,a))})},e.prototype.generateBar=function(t,e){var n=this;return Array.from(Array(4)).map(function(a,r){return o.createElement(s,{height:t.height,beatsPerBar:4,beatDivisions:t.beatDivisions,track:t.trackID,soundId:t.soundID,id:4*e+r,key:r,notifyToggle:function(){return n.toggleDivision(r)},noteMap:t.noteMap,active:!1})})},e.prototype.toggleDivision=function(t){console.log("toggledivision"),console.log(this.state),console.log(this.state.noteMap)},e.prototype.render=function(){return o.createElement("div",{className:"row",style:{height:101/this.props.sounds+"%"},key:this.props.trackID},this.state.row)},e}(o.Component),u=function(t){function e(e){var n=t.call(this,e)||this;return n.state={grid:n.generateBoard(e),noteMap:e.noteMap,trackID:e.trackID},n}return r.a(e,t),e.prototype.generateBoard=function(t){return Array.from(Array(t.height).keys()).map(function(e){return o.createElement(c,{key:e,soundID:e,sounds:t.height,trackID:t.trackID,height:100/t.height,beatDivisions:t.beatDivisions,noteMap:t.noteMap})})},e.prototype.render=function(){return o.createElement("div",{className:"Soundboard"},this.state.grid)},e}(o.Component),l=function(t){function e(e){return t.call(this,e)||this}return r.a(e,t),e.prototype.render=function(){return o.createElement("div",{className:"instrumentControl"},o.createElement("p",null,this.props.myName))},e}(o.Component),p=function(t){function e(e){var n=t.call(this,e)||this;return n.updateLoop=function(){var t=n.state,e=t.noteMap,o=t.trackId;if(e){n.transport.clear(n.loopId),console.log("updating instrument loop");n.loopId=n.transport.scheduleRepeat(function(t){console.log("instrument looping"+o),e.getTrack(o).forEach(function(e,o){e.forEach(function(e,a){1==e&&(console.log("playing note: "+a+": "+e),n.playSound(o,t+a*new i.Time("16n").toSeconds()))})})},"1m")}},n.state={gridState:[!1,!1,!1,!1],trackId:e.id,loopPlaying:e.loopPlaying,noteMap:e.noteMap},n.transport=i.Transport,n.loopId=n.state.trackId,n.baseURL="/react-drum-machine/Samples/Drums",n}return r.a(e,t),e.prototype.playSound=function(t,e){throw new Error("implement playsound")},e.prototype.componentWillReceiveProps=function(t){this.setState({loopPlaying:t.loopPlaying}),this.updateLoop()},e.prototype.updateSoundboard=function(t){this.props.updateGrid(t),this.setState({gridState:t})},e.prototype.render=function(){return o.createElement("div",{className:"instrument active n"+this.props.id},o.createElement(l,{key:this.props.id,myName:this.props.myName}),o.createElement(u,{updateGrid:this.updateSoundboard,height:this.state.noteMap.getTrack(this.props.id).length,trackID:this.props.id,beatDivisions:16,noteMap:this.state.noteMap}))},e}(o.Component),f=function(t){function e(e){var n=t.call(this,e)||this,o=["/Kicks/"];return n.buffers=[],["MB Kick (2).wav","MB Kick (4).wav","MB Kick (14).wav","MB Kick (15).wav"].forEach(function(t,e){n.buffers.push(new i.Player(n.baseURL+o+t).toMaster())}),n}return r.a(e,t),e.prototype.playSound=function(t,e){this.buffers[t].loaded&&this.buffers[t].start(e)},e}(p),h=function(t){function e(e){var n=t.call(this,e)||this,o=["/react-drum-machine/Samples/Chords/"];return n.buffers=[],["viio.aif","vi.aif","V.aif","IV.aif","iii.aif","ii.aif","I.aif"].forEach(function(t,e){n.buffers.push(new i.Player(o+t).toMaster())}),n}return r.a(e,t),e.prototype.playSound=function(t,e){this.buffers[t].loaded&&this.buffers[t].start(e)},e}(p),d=function(t){function e(e){var n=t.call(this,e)||this,o=["/Hi-Hats/"];return n.buffers=[],["MB Hi Hat (2).wav","MB Hi Hat (5).wav","MB Hi Hat (7).wav","MB Hi Hat (9).wav"].forEach(function(t,e){n.buffers.push(new i.Player(n.baseURL+o+t).toMaster())}),n}return r.a(e,t),e.prototype.playSound=function(t,e){this.buffers[t].loaded&&this.buffers[t].start(e)},e}(p),y=function(t){function e(e){var n=t.call(this,e)||this;return n.synths=[(new i.PluckSynth).toMaster(),(new i.PluckSynth).toMaster(),(new i.PluckSynth).toMaster(),(new i.PluckSynth).toMaster(),(new i.PluckSynth).toMaster(),(new i.PluckSynth).toMaster(),(new i.PluckSynth).toMaster(),(new i.PluckSynth).toMaster()],n.notes=["C4","D4","E4","F4","G4","A4","B4","C5"].reverse(),n}return r.a(e,t),e.prototype.playSound=function(t,e){this.synths[t]&&(console.log("synth playing sound: "+this.notes[t]),this.synths[t].triggerAttackRelease(this.notes[t],"16n",e))},e}(p),g=function(t){function e(e){var n=t.call(this,e)||this,o=["/Snares/"];return n.buffers=[],["MB Snare (1).wav","MB Snare (2).wav","MB Snare (11).wav","MB Snare (15).wav"].forEach(function(t,e){n.buffers.push(new i.Player(n.baseURL+o+t).toMaster())}),n}return r.a(e,t),e.prototype.playSound=function(t,e){this.buffers[t].loaded&&this.buffers[t].start(e)},e}(p),v=function(t){function e(e){var n=t.call(this,e)||this,o=["/Claps/"];return n.buffers=[],["MB Clap (3).wav","MB Clap (2).wav","MB Clap (4).wav","MB Clap (7).wav"].forEach(function(t,e){n.buffers.push(new i.Player(n.baseURL+o+t).toMaster())}),n}return r.a(e,t),e.prototype.playSound=function(t,e){this.buffers[t].loaded&&this.buffers[t].start(e)},e}(p),m=function(t){function e(e){var n=t.call(this,e)||this,o=["/Open Hats/"];return n.buffers=[],["MB Open Hat (3).wav","MB Open Hat (5).wav","MB Open Hat (6).wav","MB Open Hat (8).wav"].forEach(function(t,e){n.buffers.push(new i.Player(n.baseURL+o+t).toMaster())}),n}return r.a(e,t),e.prototype.playSound=function(t,e){this.buffers[t].loaded&&this.buffers[t].start(e)},e}(p),w=function(t){function e(e){var n=t.call(this,e)||this,o=["/Crashes/"];return n.buffers=[],["MB Crash (3).wav","MB Crash (2).wav","MB Crash (5).wav","MB Crash (9).wav"].forEach(function(t,e){n.buffers.push(new i.Player(n.baseURL+o+t).toMaster())}),n}return r.a(e,t),e.prototype.playSound=function(t,e){this.buffers[t].loaded&&this.buffers[t].start(e)},e}(p),M=function(t){function e(e){var n=t.call(this,e)||this,o=["/Extras/"];return n.buffers=[],["MB Church Bell.wav","MB Lumi Hit.wav","MB Narcatics Hit.wav","MB Tubular Bell.wav"].forEach(function(t,e){n.buffers.push(new i.Player(n.baseURL+o+t).toMaster())}),n}return r.a(e,t),e.prototype.playSound=function(t,e){this.buffers[t].loaded&&this.buffers[t].start(e)},e}(p),b=function(t){function e(e){var n=t.call(this,e)||this;return n.state={isPlaying:!1},n}return r.a(e,t),e.prototype.componentWillReceiveProps=function(t){this.setState({isPlaying:t.isPlaying})},e.prototype.render=function(){return o.createElement("div",{className:"playButton",onClick:this.props.playFunc},this.state.isPlaying?o.createElement("i",{className:"fa fa-stop"}):o.createElement("i",{className:"fa fa-play"}))},e}(o.Component),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e.prototype.render=function(){return o.createElement("div",{className:"track"},this.props.children)},e}(o.Component),P=function(){function t(){this._noteMap=[[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]],this.get=this.get.bind(this),this.set=this.set.bind(this),this.toggle=this.toggle.bind(this)}return t.prototype.get=function(t,e,n){return!!this._noteMap[t][e][n]},t.prototype.getTrack=function(t){return this._noteMap[t]},t.prototype.set=function(t,e,n,o){return this._noteMap[t][e][n]=o?1:0,console.log(this._noteMap),this.get(t,e,n)},t.prototype.toggle=function(t,e,n){return console.log("toggling "+t+", "+n),this.set(t,e,n,!this.get(t,e,n))},t}(),B=function(t){function e(e){var n=t.call(this,e)||this;return n.state={isPlaying:e.isPlaying,noteMap:e.noteMap},n.transport=i.Transport,n.notes=n.props.grid,n.instruments=n.props.instruments,n}return r.a(e,t),e.prototype.componentWillReceiveProps=function(t){this.setState({isPlaying:t.isPlaying})},e.prototype.render=function(){return this.state.isPlaying&&"started"!=this.transport.state?this.transport.start():this.state.isPlaying||this.transport.stop(),o.createElement("div",{className:"loopPlayer"})},e.prototype.play=function(){alert("loopplayer.play"),this.loop.start(0)},e.prototype.stop=function(){this.loop.stop(0)},e}(o.Component),S=function(t){function e(e){var n=t.call(this,e)||this,o=["/808s/"];return n.buffers=[],["MB 808 (2).wav","MB 808 (7).wav","MB 808 (9).wav","MB 808 (10).wav"].forEach(function(t,e){n.buffers.push(new i.Player(n.baseURL+o+t).toMaster())}),n}return r.a(e,t),e.prototype.playSound=function(t,e){this.buffers[t].loaded&&this.buffers[t].start(e)},e}(p),E=function(t){function e(e){var n=t.call(this,e)||this,o=[y,h,S,f,g,v,d,m,w,M];return n.state={trackNames:["Lead","Chords","Sub","Kick","Snare","Clap","Hihats","OpenHats","Crashes","Percs"],trackClasses:o,trackNotes:[],loopPlaying:!1,noteMap:new P,buffersLoaded:!1},i.Buffer.on("load",function(){n.setState({buffersLoaded:!0})}),console.log("App notemap says: "+n.state.noteMap.get(0,0)),n}return r.a(e,t),e.prototype.updateGrid=function(t,e){var n=this.state.trackNotes;n[t]=e,this.setState({trackNotes:n})},e.prototype.togglePlayLoop=function(){this.setState(function(t){return{loopPlaying:!t.loopPlaying}})},e.prototype.render=function(){var t=this,e=this.state.trackClasses.map(function(e,n){return o.createElement(e,{key:n,id:n,myName:t.state.trackNames[n],loopPlaying:t.state.loopPlaying,updateGrid:function(e){t.updateGrid(n,e)},noteMap:t.state.noteMap})});return o.createElement("div",{className:"App"},o.createElement("header",{className:"App-header"},o.createElement("h1",{className:"App-title"},"Welcome to the Web Audio Interface!"),this.state.buffersLoaded?o.createElement(b,{isPlaying:this.state.loopPlaying,playFunc:function(){return t.togglePlayLoop()}}):o.createElement("p",{className:"playBtnLoading"},"Loading..."),o.createElement(B,{isPlaying:this.state.loopPlaying,instruments:e,noteMap:this.state.noteMap,grid:this.state.trackNotes})),o.createElement("main",null,o.createElement("div",{className:"Tracks"},e.map(function(t,e){return o.createElement(k,{key:e},t)}))))},e}(o.Component),C=(n(17),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function N(t){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var e=t.installing;e&&(e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}}).catch(function(t){console.error("Error during service worker registration:",t)})}a.render(o.createElement(E,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/react-drum-machine",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="/react-drum-machine/service-worker.js";C?(function(t){fetch(t).then(function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):N(t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):N(t)})}}()}],[[6,2,1]]]);
//# sourceMappingURL=main.9302eef6.chunk.js.map